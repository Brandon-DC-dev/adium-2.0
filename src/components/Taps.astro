---
import GitHub from "./icons/GitHub.astro";
import Html from "./icons/Html.astro";
import Javascript from "./icons/Javascript.astro";
import Link from "./icons/Link.astro";
import LinkButton from "./LinkButton.astro";
import Php from "./icons/Php.astro";
import Treejs from "./icons/Treejs.astro";
import Bootstrap from "./icons/Bootstrap.astro";
import Sql from "./icons/Mysql.astro";

const TAGS = {
  COMIDA: { name: "COMIDA", class: "bg-red text-white" ,icon: Javascript,},
//   BOOTSTRAP: {
//     name: "Bootstrap",
//     class: "bg-[#563d7c] text-white",
//     icon: Bootstrap,
//   },
//   PHP: { name: "PHP", class: "bg-indigo-700 text-white", icon: Php },
//   JAVASCRIPT: {
//     name: "JavaScript",
//     class: "bg-yellow-600 text-white",
//     icon: Javascript,
//   },
//   HTML: { name: "HTML", class: "bg-red-600 text-white", icon: Html },
//   MYSQL: { name: "MySQL", class: "bg-blue-700 text-white", icon: Sql },
};

const PROJECTS = [
  {
    title: "Toro Steakhouse",
    description: "Biblioteca online desarrollada en PHP con MySQL y Bootstrap.",
    maps: "https://maps.app.goo.gl/cH9xkjndNhADJq5Y8",
    // github: "https://github.com/Brandon-DC-dev/biblioteca-virtua",
    image: "/projects/toro.png",
    tags: [TAGS.COMIDA],
  },
//   {
//     title: "360 Grados - Visualizador 3D con Tree.js",
//     description: "Visualizador panorÃ¡mico 3D basado en Three.js y Panolens.js.",
//     link: "https://sparkling-sunshine-da227f.netlify.app",
//     github: "https://github.com/Brandon-DC-dev/360-grados",
//     image: "/projects/360recorrido.webp",
//     tags: [TAGS.TORO],
//   },
  // ðŸ‘‰ aquÃ­ puedes agregar mÃ¡s proyectos sin problema
];
---

<!-- ðŸ”¹ Tabs -->
<div class="mb-6 border-b border-gray-200 dark:border-gray-700">
  <ul
    id="tabs"
    class="flex flex-wrap text-sm font-medium text-center justify-center gap-x-4"
  >
    <li>
      <button
        data-tab="all"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300 active-tab"
        >Todos</button>
    </li>
    <li>
      <button
        data-tab="COMIDA"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300"
        >COMIDA</button>
    </li>
    <li>
      <button
        data-tab="JavaScript"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300"
        >JavaScript</button>
    </li>
    <li>
      <button
        data-tab="HTML"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300"
        >HTML</button>
    </li>
    <li>
      <button
        data-tab="Tree.js"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300"
        >Tree.js</button>
    </li>
    <li>
      <button
        data-tab="MySQL"
        class="p-3 border-b-2 border-transparent hover:border-gray-300 dark:hover:text-gray-300"
        >MySQL</button>
    </li>
  </ul>
</div>

<!-- ðŸ”¹ Grid de proyectos -->
<div
  id="projects-container"
  class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"
>
  {
    PROJECTS.map(({ image, title, description, tags, link, maps }) => (
      <article
        class="project-card flex flex-col bg-gray-50 dark:bg-gray-800 rounded-xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 transition-all duration-300 hover:-translate-y-1 hover:shadow-lg"
        data-tags={tags.map((t) => t.name).join(",")}
      >
        <img
          src={image}
          alt={title}
          class="object-cover w-full h-48"
          loading="lazy"
        />

        <div class="flex flex-col flex-grow p-4">
          <h3 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-2">
            {title}
          </h3>

          <ul class="flex flex-wrap mb-3 gap-2">
            {tags.map((tag) => (
              <li>
                <span
                  class={`flex items-center gap-x-2 rounded-full text-xs ${tag.class} py-1 px-2`}
                >
                  <tag.icon class="size-4" /> {tag.name}
                </span>
              </li>
            ))}
          </ul>

          <p class="text-gray-700 dark:text-gray-400 flex-grow">
            {description}
          </p>

          <footer class="flex items-center justify-start mt-4 gap-x-4">
            {maps && (
              <LinkButton href={maps}>
                <maps class="size-5" /> Code
              </LinkButton>
            )}
            {link && (
              <LinkButton href={link}>
                <Link class="size-4" /> Preview
              </LinkButton>
            )}
          </footer>
        </div>
      </article>
    ))
  }
</div>

<!-- ðŸ”¹ Script de filtrado -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const tabs = document.querySelectorAll("#tabs button");
    const projects = document.querySelectorAll(".project-card");

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        tabs.forEach((t) =>
          t.classList.remove("active-tab", "border-blue-500", "text-blue-600")
        );
        tab.classList.add("active-tab", "border-blue-500", "text-blue-600");

        const selected = tab.dataset.tab;

        projects.forEach((project) => {
          const tags = project.dataset.tags.split(",");
          if (selected === "all" || tags.includes(selected)) {
            project.style.display = "flex";
          } else {
            project.style.display = "none";
          }
        });
      });
    });
  });
</script>

<style>
  .active-tab {
    border-color: rgb(59 130 246); /* blue-500 */
    color: rgb(37 99 235);
  }
</style>
